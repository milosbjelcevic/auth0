{"remainingRequest":"/Users/milosbjelcevic/www/vue-auth0/node_modules/babel-loader/lib/index.js!/Users/milosbjelcevic/www/vue-auth0/node_modules/eslint-loader/index.js??ref--13-0!/Users/milosbjelcevic/www/vue-auth0/src/auth/authWrapper.js","dependencies":[{"path":"/Users/milosbjelcevic/www/vue-auth0/src/auth/authWrapper.js","mtime":1573721832000},{"path":"/Users/milosbjelcevic/www/vue-auth0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/milosbjelcevic/www/vue-auth0/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/milosbjelcevic/www/vue-auth0/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/milosbjelcevic/www/vue-auth0/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"/Users/milosbjelcevic/www/vue-auth0/node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport Vue from \"vue\";\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\n\nvar DEFAULT_REDIRECT_CALLBACK = function DEFAULT_REDIRECT_CALLBACK() {\n  return window.history.replaceState({}, document.title, window.location.pathname);\n};\n\nvar instance;\nexport var getInstance = function getInstance() {\n  return instance;\n};\nexport var useAuth0 = function useAuth0(_ref) {\n  var _ref$onRedirectCallba = _ref.onRedirectCallback,\n      onRedirectCallback = _ref$onRedirectCallba === void 0 ? DEFAULT_REDIRECT_CALLBACK : _ref$onRedirectCallba,\n      _ref$redirectUri = _ref.redirectUri,\n      redirectUri = _ref$redirectUri === void 0 ? window.location.origin : _ref$redirectUri,\n      options = _objectWithoutProperties(_ref, [\"onRedirectCallback\", \"redirectUri\"]);\n\n  if (instance) return instance;\n  instance = new Vue({\n    data: function data() {\n      return {\n        loading: true,\n        isAuthenticated: false,\n        user: {},\n        auth0Client: null,\n        popupOpen: false,\n        error: null\n      };\n    },\n    methods: {\n      loginWithPopup: function () {\n        var _loginWithPopup = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee(o) {\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  this.popupOpen = true;\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return this.auth0Client.loginWithPopup(o);\n\n                case 4:\n                  _context.next = 6;\n                  return this.auth0Client.getUser();\n\n                case 6:\n                  this.user = _context.sent;\n                  _context.next = 9;\n                  return this.auth0Client.isAuthenticated();\n\n                case 9:\n                  this.isAuthenticated = _context.sent;\n                  this.error = null;\n                  _context.next = 17;\n                  break;\n\n                case 13:\n                  _context.prev = 13;\n                  _context.t0 = _context[\"catch\"](1);\n                  console.error(_context.t0);\n                  this.error = _context.t0;\n\n                case 17:\n                  _context.prev = 17;\n                  this.popupOpen = false;\n                  return _context.finish(17);\n\n                case 20:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[1, 13, 17, 20]]);\n        }));\n\n        function loginWithPopup(_x) {\n          return _loginWithPopup.apply(this, arguments);\n        }\n\n        return loginWithPopup;\n      }(),\n      handleRedirectCallback: function () {\n        var _handleRedirectCallback = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee2() {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  this.loading = true;\n                  _context2.prev = 1;\n                  _context2.next = 4;\n                  return this.auth0Client.handleRedirectCallback();\n\n                case 4:\n                  _context2.next = 6;\n                  return this.auth0Client.getUser();\n\n                case 6:\n                  this.user = _context2.sent;\n                  this.isAuthenticated = true;\n                  this.error = null;\n                  _context2.next = 14;\n                  break;\n\n                case 11:\n                  _context2.prev = 11;\n                  _context2.t0 = _context2[\"catch\"](1);\n                  this.error = _context2.t0;\n\n                case 14:\n                  _context2.prev = 14;\n                  this.loading = false;\n                  return _context2.finish(14);\n\n                case 17:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this, [[1, 11, 14, 17]]);\n        }));\n\n        function handleRedirectCallback() {\n          return _handleRedirectCallback.apply(this, arguments);\n        }\n\n        return handleRedirectCallback;\n      }(),\n      loginWithRedirect: function loginWithRedirect(o) {\n        return this.auth0Client.loginWithRedirect(o);\n      },\n      getIdTokenClaims: function getIdTokenClaims(o) {\n        return this.auth0Client.getIdTokenClaims(o);\n      },\n      getTokenSilently: function getTokenSilently(o) {\n        return this.auth0Client.getTokenSilently(o);\n      },\n      getTokenWithPopup: function getTokenWithPopup(o) {\n        return this.auth0Client.getTokenWithPopup(o);\n      },\n      logout: function logout(o) {\n        return this.auth0Client.logout(o);\n      }\n    },\n    created: function () {\n      var _created = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _ref2, appState;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return createAuth0Client({\n                  domain: options.domain,\n                  client_id: options.clientId,\n                  audience: options.audience,\n                  redirect_uri: redirectUri\n                });\n\n              case 2:\n                this.auth0Client = _context3.sent;\n                _context3.prev = 3;\n\n                if (!(window.location.search.includes(\"code=\") && window.location.search.includes(\"state=\"))) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _context3.next = 7;\n                return this.auth0Client.handleRedirectCallback();\n\n              case 7:\n                _ref2 = _context3.sent;\n                appState = _ref2.appState;\n                this.error = null;\n                onRedirectCallback(appState);\n\n              case 11:\n                _context3.next = 16;\n                break;\n\n              case 13:\n                _context3.prev = 13;\n                _context3.t0 = _context3[\"catch\"](3);\n                this.error = _context3.t0;\n\n              case 16:\n                _context3.prev = 16;\n                _context3.next = 19;\n                return this.auth0Client.isAuthenticated();\n\n              case 19:\n                this.isAuthenticated = _context3.sent;\n                _context3.next = 22;\n                return this.auth0Client.getUser();\n\n              case 22:\n                this.user = _context3.sent;\n                this.loading = false;\n                return _context3.finish(16);\n\n              case 25:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 13, 16, 25]]);\n      }));\n\n      function created() {\n        return _created.apply(this, arguments);\n      }\n\n      return created;\n    }()\n  });\n  return instance;\n};\nexport var Auth0Plugin = {\n  install: function install(Vue, options) {\n    Vue.prototype.$auth = useAuth0(options);\n  }\n};",{"version":3,"sources":["/Users/milosbjelcevic/www/vue-auth0/src/auth/authWrapper.js"],"names":["Vue","createAuth0Client","DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","title","location","pathname","instance","getInstance","useAuth0","onRedirectCallback","redirectUri","origin","options","data","loading","isAuthenticated","user","auth0Client","popupOpen","error","methods","loginWithPopup","o","getUser","console","handleRedirectCallback","loginWithRedirect","getIdTokenClaims","getTokenSilently","getTokenWithPopup","logout","created","domain","client_id","clientId","audience","redirect_uri","search","includes","appState","Auth0Plugin","install","prototype","$auth"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname);\n\nlet instance;\n\nexport const getInstance = () => instance;\n\nexport const useAuth0 = ({\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  redirectUri = window.location.origin,\n  ...options\n}) => {\n  if (instance) return instance;\n\n  instance = new Vue({\n    data() {\n      return {\n        loading: true,\n        isAuthenticated: false,\n        user: {},\n        auth0Client: null,\n        popupOpen: false,\n        error: null\n      };\n    },\n    methods: {\n      async loginWithPopup(o) {\n        this.popupOpen = true;\n\n        try {\n          await this.auth0Client.loginWithPopup(o);\n          this.user = await this.auth0Client.getUser();\n          this.isAuthenticated = await this.auth0Client.isAuthenticated();\n          this.error = null;\n        } catch (e) {\n          console.error(e);\n          this.error = e;\n        } finally {\n          this.popupOpen = false;\n        }\n      },\n      async handleRedirectCallback() {\n        this.loading = true;\n        try {\n          await this.auth0Client.handleRedirectCallback();\n          this.user = await this.auth0Client.getUser();\n          this.isAuthenticated = true;\n          this.error = null;\n        } catch (e) {\n          this.error = e;\n        } finally {\n          this.loading = false;\n        }\n      },\n      loginWithRedirect(o) {\n        return this.auth0Client.loginWithRedirect(o);\n      },\n      getIdTokenClaims(o) {\n        return this.auth0Client.getIdTokenClaims(o);\n      },\n      getTokenSilently(o) {\n        return this.auth0Client.getTokenSilently(o);\n      },\n      getTokenWithPopup(o) {\n        return this.auth0Client.getTokenWithPopup(o);\n      },\n      logout(o) {\n        return this.auth0Client.logout(o);\n      }\n    },\n    async created() {\n      this.auth0Client = await createAuth0Client({\n        domain: options.domain,\n        client_id: options.clientId,\n        audience: options.audience,\n        redirect_uri: redirectUri\n      });\n\n      try {\n        if (\n          window.location.search.includes(\"code=\") &&\n          window.location.search.includes(\"state=\")\n        ) {\n          const { appState } = await this.auth0Client.handleRedirectCallback();\n          this.error = null;\n          onRedirectCallback(appState);\n        }\n      } catch (e) {\n        this.error = e;\n      } finally {\n        this.isAuthenticated = await this.auth0Client.isAuthenticated();\n        this.user = await this.auth0Client.getUser();\n        this.loading = false;\n      }\n    }\n  });\n\n  return instance;\n};\n\nexport const Auth0Plugin = {\n  install(Vue, options) {\n    Vue.prototype.$auth = useAuth0(options);\n  }\n};\n"]}]}